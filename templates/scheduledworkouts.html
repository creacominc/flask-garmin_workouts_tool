<!-- Extend layout -->
{% extends "layout.html" %}

{% block body %}
<!--Update navbar-->
<script>document.getElementById("scheduled").className += "dropdown active";</script>

<h3>Scheduled Workouts</h3>
<div class="col-lg-12">
    {% from "_formhelpers.html" import render_field %}
    <form method="POST" action="{{ url_for('scheduledworkouts') }}">
        {{ render_field(scheduled_workouts_form.start_date) }}
        {{ render_field(scheduled_workouts_form.end_date) }}
        <br>
        <input type="submit" value="Filter by Date"/>
    </form>
    <table class="table table-striped table-bordered table-hover" style="font-size: 80%;">
        <tr>
            <td><b>Date</b></td>
            <td><b>Plan ID</b></td>
            <td><b>Workout ID</b></td>
            <td><b>Schedule ID</b></td>
            <td><b>Workout Name</b></td>
            <td><b>Delete</b></td>
        </tr>
        {% for i in json_obj['ExportableWorkoutScheduleResult']['workoutScheduleList'] %}
        {% if 'ExportableWorkoutSchedule' in i %}
        <tr>
            <td style="width:20%">{{i['ExportableWorkoutSchedule']['calendarDate'].encode('ascii',
                'ignore').decode('ascii')}}
            </td>
            <td style="width:8%">{{i['ExportableWorkoutSchedule']['trainingPlanId']}}</td>
            <td style="width:10%">{{i['ExportableWorkoutSchedule']['workoutId'].encode('ascii',
                'ignore').decode('ascii')}}
            </td>
            <td style="width:12%">{{i['ExportableWorkoutSchedule']['scheduleId'].encode('ascii',
                'ignore').decode('ascii')}}
            </td>
            <td style="width:50%">{{i['ExportableWorkoutSchedule']['workoutName'].encode('ascii',
                'ignore').decode('ascii')}}
            </td>
            <td><input type='button'
                       onclick="location.href='deletescheduledworkout/{{ i['ExportableWorkoutSchedule']['scheduleId']|string }}';"
                       value='Delete'/></td>
        </tr>
        {% endif %}
        {% endfor %}
    </table>
    <button id="show-schedule-json">Show Workout List JSON</button>
    <div id="schedule-json-field">
        <textarea name='result' rows='20' cols='80'>{{result}}</textarea>
    </div>
</div>

<script src="{{ url_for('static', filename='text-area-helpers.js') }}"></script>

{% endblock %}